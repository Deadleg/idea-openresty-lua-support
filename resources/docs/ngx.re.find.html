<p><strong>syntax:</strong> <em>from, to, err = ngx.re.find(subject, regex, options?, ctx?, nth?)</em></p><p><strong>context:</strong> <em>init_worker_by_lua&#42;, set_by_lua&#42;, rewrite_by_lua&#42;, access_by_lua&#42;, content_by_lua&#42;, header_filter_by_lua&#42;, body_filter_by_lua&#42;, log_by_lua&#42;, ngx.timer.&#42;, balancer_by_lua&#42;, ssl_certificate_by_lua&#42;, ssl_session_fetch_by_lua&#42;, ssl_session_store_by_lua&#42;</em></p><p>Similar to <a href="#ngxrematch">ngx.re.match</a> but only returns the beginning index (<code>from</code>) and end index (<code>to</code>) of the matched substring. The returned indexes are 1-based and can be fed directly into the <a href="http://www.lua.org/manual/5.1/manual.html#pdf-string.sub">string.sub</a> API function to obtain the matched substring.</p><p>In case of errors (like bad regexes or any PCRE runtime errors), this API function returns two <code>nil</code> values followed by a string describing the error.</p><p>If no match is found, this function just returns a <code>nil</code> value.</p><p>Below is an example:</p><p>```lua</p><p>local s = "hello, 1234"  local from, to, err = ngx.re.find(s, "([0-9]+)", "jo")  if from then  ngx.say("from: ", from)  ngx.say("to: ", to)  ngx.say("matched: ", string.sub(s, from, to))  else  if err then  ngx.say("error: ", err)  return  end  ngx.say("not matched!")  end ```</p><p>This example produces the output</p>
<pre><code>from: 8
to: 11
matched: 1234
</code></pre><p>Because this API function does not create new Lua strings nor new Lua tables, it is much faster than <a href="#ngxrematch">ngx.re.match</a>. It should be used wherever possible.</p><p>Since the <code>0.9.3</code> release, an optional 5th argument, <code>nth</code>, is supported to specify which (submatch) capture's indexes to return. When <code>nth</code> is 0 (which is the default), the indexes for the whole matched substring is returned; when <code>nth</code> is 1, then the 1st submatch capture's indexes are returned; when <code>nth</code> is 2, then the 2nd submatch capture is returned, and so on. When the specified submatch does not have a match, then two <code>nil</code> values will be returned. Below is an example for this:</p><p>```lua</p><p>local str = "hello, 1234"  local from, to = ngx.re.find(str, "([0-9])([0-9]+)", "jo", nil, 2)  if from then  ngx.say("matched 2nd submatch: ", string.sub(str, from, to)) -- yields "234"  end ```</p><p>This API function was first introduced in the <code>v0.9.2</code> release.</p>