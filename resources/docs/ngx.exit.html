<p><strong>syntax:</strong> <em>ngx.exit(status)</em></p><p><strong>context:</strong> <em>rewrite_by_lua&#42;, access_by_lua&#42;, content_by_lua&#42;, header_filter_by_lua&#42;, ngx.timer.&#42;, balancer_by_lua&#42;, ssl_certificate_by_lua&#42;, ssl_session_fetch_by_lua&#42;, ssl_session_store_by_lua&#42;</em></p><p>When <code>status &gt;= 200</code> (i.e., <code>ngx.HTTP_OK</code> and above), it will interrupt the execution of the current request and return status code to nginx.</p><p>When <code>status == 0</code> (i.e., <code>ngx.OK</code>), it will only quit the current phase handler (or the content handler if the <a href="#content_by_lua">content_by_lua*</a> directive is used) and continue to run later phases (if any) for the current request.</p><p>The <code>status</code> argument can be <code>ngx.OK</code>, <code>ngx.ERROR</code>, <code>ngx.HTTP_NOT_FOUND</code>, <code>ngx.HTTP_MOVED_TEMPORARILY</code>, or other <a href="#http-status-constants">HTTP status constants</a>.</p><p>To return an error page with custom contents, use code snippets like this:</p><p>```lua</p><p>ngx.status = ngx.HTTP_GONE  ngx.say("This is our own content")  -- to cause quit the whole request rather than the current phase handler  ngx.exit(ngx.HTTP_OK) ```</p><p>The effect in action:</p><p>```bash</p><p>$ curl -i http://localhost/test  HTTP/1.1 410 Gone  Server: nginx/1.0.6  Date: Thu, 15 Sep 2011 00:51:48 GMT  Content-Type: text/plain  Transfer-Encoding: chunked  Connection: keep-alive</p><p>This is our own content ```</p><p>Number literals can be used directly as the argument, for instance,</p><p>```lua</p><p>ngx.exit(501) ```</p><p>Note that while this method accepts all <a href="#http-status-constants">HTTP status constants</a> as input, it only accepts <code>NGX_OK</code> and <code>NGX_ERROR</code> of the <a href="#core-constants">core constants</a>.</p><p>Also note that this method call terminates the processing of the current request and that it is recommended that a coding style that combines this method call with the <code>return</code> statement, i.e., <code>return ngx.exit(...)</code> be used to reinforce the fact that the request processing is being terminated.</p><p>When being used in the contexts of <a href="#header_filter_by_lua">header_filter_by_lua*</a>, <a href="#balancer_by_lua_block">balancer_by_lua*</a>, and <a href="#ssl_session_store_by_lua_block">ssl_session_store_by_lua*</a>, <code>ngx.exit()</code> is an asynchronous operation and will return immediately. This behavior may change in future and it is recommended that users always use <code>return</code> in combination as suggested above.</p>