<p><strong>syntax:</strong> <em>res1, res2, ... = ngx.location.capture_multi({ {uri, options?}, {uri, options?}, ... })</em></p><p><strong>context:</strong> <em>rewrite_by_lua&#42;, access_by_lua&#42;, content_by_lua&#42;</em></p><p>Just like <a href="#ngxlocationcapture">ngx.location.capture</a>, but supports multiple subrequests running in parallel.</p><p>This function issues several parallel subrequests specified by the input table and returns their results in the same order. For example,</p><p>```lua</p><p>res1, res2, res3 = ngx.location.capture_multi{  { "/foo", { args = "a=3&amp;b=4" } },  { "/bar" },  { "/baz", { method = ngx.HTTP_POST, body = "hello" } },  }</p><p>if res1.status == ngx.HTTP_OK then  ...  end</p><p>if res2.body == "BLAH" then  ...  end ```</p><p>This function will not return until all the subrequests terminate. The total latency is the longest latency of the individual subrequests rather than the sum.</p><p>Lua tables can be used for both requests and responses when the number of subrequests to be issued is not known in advance:</p><p>```lua</p><p>-- construct the requests table  local reqs = {}  table.insert(reqs, { "/mysql" })  table.insert(reqs, { "/postgres" })  table.insert(reqs, { "/redis" })  table.insert(reqs, { "/memcached" })</p><p>-- issue all the requests at once and wait until they all return  local resps = { ngx.location.capture_multi(reqs) }</p><p>-- loop over the responses table  for i, resp in ipairs(resps) do  -- process the response table "resp"  end ```</p><p>The <a href="#ngxlocationcapture">ngx.location.capture</a> function is just a special form of this function. Logically speaking, the <a href="#ngxlocationcapture">ngx.location.capture</a> can be implemented like this</p><p>```lua</p><p>ngx.location.capture =  function (uri, args)  return ngx.location.capture_multi({ {uri, args} })  end ```</p><p>Please also refer to restrictions on capturing locations configured by <a href="#locations-configured-by-subrequest-directives-of-other-modules">subrequest directives of other modules</a>.</p>