<p><strong>syntax:</strong> <em>newstr, n, err = ngx.re.gsub(subject, regex, replace, options?)</em></p><p><strong>context:</strong> <em>init_worker_by_lua&#42;, set_by_lua&#42;, rewrite_by_lua&#42;, access_by_lua&#42;, content_by_lua&#42;, header_filter_by_lua&#42;, body_filter_by_lua&#42;, log_by_lua&#42;, ngx.timer.&#42;, balancer_by_lua&#42;, ssl_certificate_by_lua&#42;</em></p><p>Just like <a href="#ngxresub">ngx.re.sub</a>, but does global substitution.</p><p>Here is some examples:</p><p>```lua</p><p>local newstr, n, err = ngx.re.gsub("hello, world", "([a-z])[a-z]+", "[$0,$1]", "i")  if newstr then  -- newstr == "[hello,h], [world,w]"  -- n == 2  else  ngx.log(ngx.ERR, "error: ", err)  return  end ```</p><p>```lua</p><p>local func = function (m)  return "[" .. m[0] .. "," .. m[1] .. "]"  end  local newstr, n, err = ngx.re.gsub("hello, world", "([a-z])[a-z]+", func, "i")  -- newstr == "[hello,h], [world,w]"  -- n == 2 ```</p><p>This method requires the PCRE library enabled in Nginx. (<a href="#special-escaping-sequences">Known Issue With Special Escaping Sequences</a>).</p><p>This feature was first introduced in the <code>v0.2.1rc15</code> release.</p>