<p><strong>syntax:</strong> <em>args, err = ngx.req.get_post_args(max_args?)</em></p><p><strong>context:</strong> <em>rewrite_by_lua&#42;, access_by_lua&#42;, content_by_lua&#42;, header_filter_by_lua&#42;, body_filter_by_lua, log_by_lua&#42;</em></p><p>Returns a Lua table holding all the current request POST query arguments (of the MIME type <code>application/x-www-form-urlencoded</code>). Call <a href="#ngxreqread_body">ngx.req.read_body</a> to read the request body first or turn on the <a href="#lua_need_request_body">lua_need_request_body</a> directive to avoid errors.</p><p>```nginx</p><p>location = /test {  content_by_lua '  ngx.req.read_body()  local args, err = ngx.req.get_post_args()  if not args then  ngx.say("failed to get post args: ", err)  return  end  for key, val in pairs(args) do  if type(val) == "table" then  ngx.say(key, ": ", table.concat(val, ", "))  else  ngx.say(key, ": ", val)  end  end  ';  } ```</p><p>Then</p><p>```bash</p><p># Post request with the body 'foo=bar&amp;bar=baz&amp;bar=blah'  $ curl --data 'foo=bar&amp;bar=baz&amp;bar=blah' localhost/test ```</p><p>will yield the response body like</p><p>```bash</p><p>foo: bar  bar: baz, blah ```</p><p>Multiple occurrences of an argument key will result in a table value holding all of the values for that key in order.</p><p>Keys and values will be unescaped according to URI escaping rules.</p><p>With the settings above,</p><p>```bash</p><p># POST request with body 'a%20b=1%61+2'  $ curl -d 'a%20b=1%61+2' localhost/test ```</p><p>will yield:</p><p>```bash</p><p>a b: 1a 2 ```</p><p>Arguments without the <code>=&lt;value&gt;</code> parts are treated as boolean arguments. <code>POST /test</code> with the request body <code>foo&amp;bar</code> will yield:</p><p>```bash</p><p>foo: true  bar: true ```</p><p>That is, they will take Lua boolean values <code>true</code>. However, they are different from arguments taking empty string values. <code>POST /test</code> with request body <code>foo=&amp;bar=</code> will return something like</p><p>```bash</p><p>foo:  bar: ```</p><p>Empty key arguments are discarded. <code>POST /test</code> with body <code>=hello&amp;=world</code> will yield empty outputs for instance.</p><p>Note that a maximum of 100 request arguments are parsed by default (including those with the same name) and that additional request arguments are silently discarded to guard against potential denial of service attacks. </p><p>However, the optional <code>max_args</code> function argument can be used to override this limit:</p><p>```lua</p><p>local args = ngx.req.get_post_args(10) ```</p><p>This argument can be set to zero to remove the limit and to process all request arguments received:</p><p>```lua</p><p>local args = ngx.req.get_post_args(0) ```</p><p>Removing the <code>max_args</code> cap is strongly discouraged.</p>