<p><strong>syntax:</strong> <em>headers = ngx.req.get_headers(max_headers?, raw?)</em></p><p><strong>context:</strong> <em>set_by_lua&#42;, rewrite_by_lua&#42;, access_by_lua&#42;, content_by_lua&#42;, header_filter_by_lua&#42;, body_filter_by_lua, log_by_lua&#42;</em></p><p>Returns a Lua table holding all the current request headers.</p><p>```lua</p><p>local h = ngx.req.get_headers()  for k, v in pairs(h) do  ...  end ```</p><p>To read an individual header:</p><p>```lua</p><p>ngx.say("Host: ", ngx.req.get_headers()["Host"]) ```</p><p>Note that the <a href="#ngxvarvariable">ngx.var.HEADER</a> API call, which uses core <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#var_http_">$http_HEADER</a> variables, may be more preferable for reading individual request headers.</p><p>For multiple instances of request headers such as:</p><p>```bash</p><p>Foo: foo  Foo: bar  Foo: baz ```</p><p>the value of <code>ngx.req.get_headers()[&quot;Foo&quot;]</code> will be a Lua (array) table such as:</p><p>```lua</p><p>{"foo", "bar", "baz"} ```</p><p>Note that a maximum of 100 request headers are parsed by default (including those with the same name) and that additional request headers are silently discarded to guard against potential denial of service attacks. </p><p>However, the optional <code>max_headers</code> function argument can be used to override this limit:</p><p>```lua</p><p>local headers = ngx.req.get_headers(10) ```</p><p>This argument can be set to zero to remove the limit and to process all request headers received:</p><p>```lua</p><p>local headers = ngx.req.get_headers(0) ```</p><p>Removing the <code>max_headers</code> cap is strongly discouraged.</p><p>Since the <code>0.6.9</code> release, all the header names in the Lua table returned are converted to the pure lower-case form by default, unless the <code>raw</code> argument is set to <code>true</code> (default to <code>false</code>).</p><p>Also, by default, an <code>__index</code> metamethod is added to the resulting Lua table and will normalize the keys to a pure lowercase form with all underscores converted to dashes in case of a lookup miss. For example, if a request header <code>My-Foo-Header</code> is present, then the following invocations will all pick up the value of this header correctly:</p><p>```lua</p><p>ngx.say(headers.my_foo_header)  ngx.say(headers["My-Foo-Header"])  ngx.say(headers["my-foo-header"]) ```</p><p>The <code>__index</code> metamethod will not be added when the <code>raw</code> argument is set to <code>true</code>.</p>